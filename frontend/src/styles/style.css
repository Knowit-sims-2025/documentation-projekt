/* Importerar grundläggande stilar för react-grid-layout */ 
@import "react-grid-layout/css/styles.css";
@import "react-resizable/css/styles.css";


/* =========================
   Bas & tokens + teman
   ========================= */
:root {
  /* Layout */
  --header-h: 72px;
  --gap: 8px;
  --container-w: clamp(960px, 90vw, 1800px);
  --container-px: 16px;

  /* Färgton för blå accent (delad mellan teman) */
  --h: 220;

  /* ===== DARK (default) – djupare navy-blå svart ===== */
  --bg: hsl(220 25% 10%);             /* djup navy-svart */
  --text: hsl(210 20% 92%);            /* varm ljusgrå – bättre läsbarhet */
  --muted: hsl(215 12% 62%);           /* dämpad sekundär */

  /* Accent (knappar, länkar, fokus) */
  --accent: hsl(var(--h) 70% 56%);     /* royal blue */
  --accent-contrast: #fff;

  /* Ytor/komponenter (elevations) */
  --card-bg: hsl(220 22% 14% / 0.88);  /* ett snäpp ljusare än bg */
  --card-border: hsl(220 30% 90% / 0.10);
  --card-shadow: 0 8px 24px hsl(220 50% 2% / 0.55);

  /* Header/default-lager */
  --c-header: hsl(220 24% 12% / 0.95); /* mörk banderoll, separerad från bg */
  --c-profile: var(--card-bg);
  --c-individual: var(--card-bg);
  --c-teams: var(--card-bg);
  --c-competition: var(--card-bg);
  --c-achievements: var(--card-bg);

  /* Extra ytnivåer */
  --surface-1: var(--card-bg);                 /* kort */
  --surface-2: hsl(220 22% 16% / 0.92);        /* modaler, paneler */
  --surface-3: hsl(220 22% 18% / 0.96);        /* topp-overlays */

  /* Statusfärger (dämpade för dark) */
  --ok:    hsl(150 45% 45%);
  --warn:  hsl(40 85% 55%);
  --err:   hsl(355 70% 60%);

  /* Z-index */
  --z-header: 100;
  --z-overlay: 200;
  --z-toast: 300;

  color-scheme: dark;
}

/* ===== LIGHT (mörkare blå variant) – aktiveras med <html data-theme="light"> ===== */
:root[data-theme="light"] {
  /* Palettparametrar för enkel justering */
  --s-bg: 40%;        /* mättnad bakgrund */
  --s-surface: 42%;   /* mättnad kort */
  --s-accent: 70%;    /* mättnad accent */
  --l-bg: 93%;        /* ljushet bakgrund (mörkare än “vanlig” light) */
  --l-surface: 90%;   /* ljushet kort */
  --l-header: 85%;    /* ljushet header */

  /* Basfärger */
  --bg: hsl(var(--h) var(--s-bg) var(--l-bg));           /* dämpat ljusblå bakgrund */
  --text: hsl(220 28% 15%);                              /* mörkblå text */
  --muted: hsl(220 15% 45%);                             /* sekundär text */

  /* Ytor */
  --card-bg: hsl(var(--h) var(--s-surface) var(--l-surface));
  --card-border: hsl(220 25% 25% / 0.25);
  --card-shadow: 0 4px 16px hsl(220 50% 10% / 0.25);

  /* Header */
  --c-header: hsl(var(--h) 50% var(--l-header));         /* djupare blå block */

  /* Sektioner */
  --c-profile: var(--card-bg);
  --c-individual: var(--card-bg);
  --c-teams: var(--card-bg);
  --c-competition: var(--card-bg);
  --c-achievements: var(--card-bg);

  /* Accent (delar hue/”--h” med dark) */
  --accent: hsl(var(--h) var(--s-accent) 40%);
  --accent-contrast: #fff;

  color-scheme: light;
}

/* ===== Fallback till systemets preferenser om inget tema satts (LIGHT) =====
   Uppdaterad till samma blåa familj som ovan – inte vitt. */
@media (prefers-color-scheme: light) {
  :root:not([data-theme]) {
    --s-bg: 40%;
    --s-surface: 42%;
    --s-accent: 70%;
    --l-bg: 93%;
    --l-surface: 90%;
    --l-header: 85%;

    --bg: hsl(var(--h) var(--s-bg) var(--l-bg));
    --text: hsl(220 28% 15%);
    --muted: hsl(220 15% 45%);
    --card-bg: hsl(var(--h) var(--s-surface) var(--l-surface));
    --card-border: hsl(220 25% 25% / 0.25);
    --card-shadow: 0 4px 16px hsl(220 50% 10% / 0.25);
    --c-header: hsl(var(--h) 50% var(--l-header));
    --c-profile: var(--card-bg);
    --c-individual: var(--card-bg);
    --c-teams: var(--card-bg);
    --c-competition: var(--card-bg);
    --c-achievements: var(--card-bg);
    --accent: hsl(var(--h) var(--s-accent) 40%);
    --accent-contrast: #fff;

    color-scheme: light;
  }
}

/* =========================
   Reset/typografi
   ========================= */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;

  /* Liten bakgrundsglow i dark för djup (neutralt i light) */
  background:
    radial-gradient(1200px 800px at 70% -10%,
      hsl(220 30% 12% / 0.5),
      transparent 60%
    ),
    var(--bg);

  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* mjuka övergångar vid temabyte */
  transition: background-color 180ms ease, color 180ms ease, background-image 180ms ease;
}
@media (prefers-reduced-motion: reduce) {
  body { transition: none; }
}

/* Fokusring för tillgänglighet (endast tangentbord) – UPPD: använd accent */
:focus-visible {
  outline: 2px solid var(--accent);   /* ändrad från currentColor */
  outline-offset: 2px;
}

/* Länkar */
a { color: var(--accent); }
a:hover { text-decoration: underline; }

/* =========================
   Layout: app
   ========================= */
.app__header {
  position: fixed;
  inset: env(safe-area-inset-top) 0 auto 0;
  height: var(--header-h);
  background: var(--c-header);
  color: var(--text);                            /* UPPD: ärv textfärg */
  border-bottom: 1px solid var(--card-border);   /* UPPD: konsekvent border */
  display: flex;
  align-items: center;
  z-index: var(--z-header);
  backdrop-filter: saturate(1.05) blur(6px);     /* liten polish i dark */
}
.app__header .container {
  width: 100%;
  max-width: var(--container-w);
  margin: 0 auto;
  padding-inline: var(--container-px);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.app__main {
  min-height: calc(100vh - var(--header-h));
  padding-top: var(--header-h);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}


/* =========================
   Grid med areas (läsbarhet)
   Dashboard Container
   ========================= */
.dashboard {
  width: 100%;
  max-width: var(--container-w);
  margin: 0 auto;
  padding: 12px var(--container-px);
  display: grid;

  grid-template-columns: 1.2fr 1fr 1fr 1.2fr;
  grid-template-rows: 1.5fr 1fr;
  grid-template-areas:
    "profile individual individual achievements"
    "profile teams      competition achievements";

  gap: var(--gap);
  min-height: calc(100vh - var(--header-h) - 24px);
  /* All positionering hanteras nu av react-grid-layout.
     Denna klass sätter bara de yttre ramarna för containern.
     Vi behöver inte längre display: grid, grid-template-areas, etc. */
}

/* =========================
   Placering via areas
   ========================= */
.profile      { grid-area: profile;      background: var(--c-profile); }
.individual   { grid-area: individual;   background: var(--c-individual); }
.teams        { grid-area: teams;        background: var(--c-teams); }
.competition  { grid-area: competition;  background: var(--c-competition); }
.achievements { grid-area: achievements; background: var(--c-achievements); }

/* =========================
   Kort-stil
   ========================= */
.card {
  display: flex;
  align-items: center;
  justify-content: center;

  font-weight: 600;
  border-radius: 12px;
  padding: 12px;

  background: var(--card-bg);
  border: 1px solid var(--card-border);
  box-shadow: var(--card-shadow);

  transition: transform 120ms ease, box-shadow 120ms ease, background-color 120ms ease, border-color 120ms ease; /* UPPD */
}
.card:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 28px hsl(220 60% 2% / 0.6);
  border-color: hsl(220 30% 90% / 0.18);
}
.card:active {
  transform: translateY(0);
  box-shadow: 0 6px 16px hsl(220 60% 2% / 0.5);
}

/* =========================
   Leaderboard-stil
   ========================= */
.leaderboard-container {
  width: 100%;
  padding: 0 16px;
  text-align: left;
}
.leaderboard-container h2 {
  font-size: 1.2rem;
  margin-bottom: 12px;
}
.leaderboard-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.leaderboard-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 4px;
  border-bottom: 1px solid var(--card-border);
  transition: background-color 120ms ease; /* UPPD */
}
.leaderboard-item:last-child { border-bottom: none; }
.leaderboard-item.is-current-user {
  background-color: hsl(50 100% 50% / 0.12); /* gulmarkering men subtil */
  font-weight: bold;
}
.leaderboard-item.is-separator {
  justify-content: center;
  cursor: pointer;
  color: var(--muted);
  font-weight: bold;
  letter-spacing: 2px;
  border-bottom: 1px solid var(--card-border);
}
.leaderboard-item.is-separator:hover {
  background-color: hsl(220 20% 20% / 0.10); /* UPPD: neutral hover */
}
.leaderboard-item:not(.is-separator) {
  cursor: pointer;
}
.leaderboard-item:not(.is-separator):hover {
  background-color: hsl(220 20% 20% / 0.05);
}
.leaderboard-name {
  flex-grow: 1; margin-left: 12px;
  transition: transform 150ms cubic-bezier(0.22, 1, 0.36, 1);
}
.leaderboard-item:hover .leaderboard-name {
  transform: translateY(-2px);
}
.leaderboard-avatar {
  width: 24px; height: 24px;
  border-radius: 50%;
  margin-left: 8px;
  object-fit: cover;
}

/* Små hjälparklasser */
.muted { color: var(--muted); }

/* =========================
   Responsivitet
   ========================= */
@media (max-width: 1024px) {
  :root { --header-h: 64px; }
}
@media (max-width: 900px) {
  .dashboard {
    grid-template-columns: 1fr;
    grid-template-rows: auto;
    grid-template-areas:
      "profile"
      "individual"
      "teams"
      "competition"
      "achievements";
    min-height: auto;
  }
}

/* =========================
   Overlay-lager
   ========================= */
.overlay {
  position: fixed;
  inset: 0;

  /* UPPD: blåtonad dim som funkar i båda teman */
  background: linear-gradient(
    to bottom,
    hsl(220 40% 2% / 0.70),
    hsl(220 40% 2% / 0.55)
  );

  display: grid;
  place-items: center;
  z-index: var(--z-overlay);
  backdrop-filter: blur(2px);
}
.overlay__card {
  background: var(--surface-2);
  border: 1px solid hsl(220 30% 90% / 0.14);
  box-shadow: 0 12px 36px hsl(220 70% 2% / 0.65);
  border-radius: 16px;
  padding: 16px;
  max-width: min(960px, 90vw);
}

/* =========================
   (Valfritt) Grundknapp som nyttjar accent
   ========================= */
.btn-primary {
  background: var(--accent);
  color: var(--accent-contrast);
  border: 1px solid color-mix(in lab, var(--accent) 60%, black);
  border-radius: 10px;
  padding: 8px 12px;
  font-weight: 600;
  transition: filter 120ms ease, transform 120ms ease;
}
.btn-primary:hover { filter: brightness(1.05); transform: translateY(-1px); }
.btn-primary:active { transform: translateY(0); }

/* =========================
   Extra polish: divider, scrollbar, selection
   ========================= */
.hr,
.divider {
  height: 1px;
  background: linear-gradient(
    to right,
    transparent,
    hsl(220 30% 90% / 0.14),
    transparent
  );
  border: 0;
}

/* Scrollbar (webkit) – diskret blågrå */
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-track { background: transparent; }
*::-webkit-scrollbar-thumb {
  background: hsl(220 20% 35% / 0.6);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
*::-webkit-scrollbar-thumb:hover { background: hsl(220 20% 45% / 0.7); }

/* Text selection – mild blå highlight */
::selection {
  background: hsl(220 70% 56% / 0.35);
  color: #fff;
}

/* High-contrast preferens */
@media (prefers-contrast: more) {
  :root {
    --card-border: hsl(220 30% 90% / 0.22);
    --muted: hsl(215 12% 72%);
  }
  .card { border-width: 1.5px; }
}

/* =========================
   Theme Toggle Switch
   ========================= */
.theme-toggle {
  --toggle-w: 50px;
  --toggle-h: 26px;
  --slider-d: 20px; /* diametern på cirkeln */
  --slider-offset: calc((var(--toggle-h) - var(--slider-d)) / 2);

  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-around;
  width: var(--toggle-w);
  height: var(--toggle-h);
  padding: 0;
  border: 1px solid var(--card-border);
  border-radius: 100px;
  background: var(--surface-2);
  cursor: pointer;
  transition: background-color 150ms ease, border-color 150ms ease;
}

.theme-toggle__sun,
.theme-toggle__moon {
  font-size: 12px;
  line-height: 1;
}

.theme-toggle__slider {
  position: absolute;
  top: var(--slider-offset);
  left: var(--slider-offset);
  width: var(--slider-d);
  height: var(--slider-d);
  border-radius: 50%;
  background: var(--accent);
  transition: transform 200ms cubic-bezier(0.22, 1, 0.36, 1);
}

/* Flytta slidern när temat är mörkt */
[data-theme="dark"] .theme-toggle__slider {
  transform: translateX(calc(var(--toggle-w) - var(--toggle-h)));
}
