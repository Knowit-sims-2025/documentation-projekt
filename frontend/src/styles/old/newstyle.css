/* =========================
   Bas & tokens + teman (OKLCH)
   ========================= */
:root {
  /* Layout */
  --header-h: 72px;
  --gap: 8px;
  --container-w: clamp(960px, 90vw, 1800px);
  --container-px: 16px;

  /* —— NY PALETT (OKLCH) —— */
  --bg-dark: oklch(0.10 0.025 264);
  --bg:      oklch(0.15 0.025 264);
  --bg-light:oklch(0.20 0.025 264);

  --text:        oklch(0.96 0.05 264);
  --text-muted:  oklch(0.76 0.05 264);

  --border:       oklch(0.40 0.05 264);
  --border-muted: oklch(0.30 0.05 264);
  --highlight:    oklch(0.50 0.05 264);

  --primary:   oklch(0.76 0.10 264);
  --secondary: oklch(0.76 0.10 84);
  --danger:    oklch(0.70 0.05 30);
  --warning:   oklch(0.70 0.05 100);
  --success:   oklch(0.70 0.05 160);
  --info:      oklch(0.70 0.05 260);

  /* Semantik & ytor */
  --accent: var(--primary);
  --accent-contrast: #0b0b0f;

  /* Ytor/komponenter (elevations) – nu via color-mix i OKLCH */
  --card-bg:     color-mix(in oklch, var(--bg) 86%, white);
  --surface-1:   var(--card-bg);
  --surface-2:   color-mix(in oklch, var(--bg) 76%, white);
  --surface-3:   color-mix(in oklch, var(--bg) 68%, white);

  --card-border: color-mix(in oklch, var(--border) 55%, transparent);
  --card-shadow: 0 8px 24px color-mix(in oklch, black 75%, transparent);

  /* Header/default-lager */
  --c-header:       color-mix(in oklch, var(--bg-dark) 92%, white);
  --c-profile:      var(--surface-1);
  --c-individual:   var(--surface-1);
  --c-teams:        var(--surface-1);
  --c-competition:  var(--surface-1);
  --c-achievements: var(--surface-1);

  /* Statusfärger (semantik) */
  --ok:   var(--success);
  --warn: var(--warning);
  --err:  var(--danger);

  /* Gradients för panel/hover */
  --gradient:       linear-gradient(0deg, var(--bg) 0%, var(--bg-light) 95%);
  --gradient-hover: linear-gradient(0deg, var(--bg) 0%, var(--bg-light) 100%);

  /* Z-index */
  --z-header: 100;
  --z-overlay: 200;
  --z-toast: 300;

  color-scheme: dark;
}

/* ===== LIGHT – OKLCH ===== */
:root[data-theme="light"] {
  --bg-dark:  oklch(0.92 0.02 264);
  --bg:       oklch(0.97 0.02 264);
  --bg-light: oklch(1 0 0);

  --text:       oklch(0.15 0.04 264);
  --text-muted: oklch(0.45 0.03 264);

  --border:       oklch(0.82 0.02 264);
  --border-muted: oklch(0.90 0.015 264);

  --card-bg:     oklch(0.94 0.02 264);
  --surface-1:   var(--card-bg);
  --surface-2:   oklch(0.92 0.02 264);
  --surface-3:   oklch(0.90 0.02 264);

  --card-border: color-mix(in oklch, var(--border) 65%, transparent);
  --card-shadow: 0 4px 16px color-mix(in oklch, black 18%, transparent);

  --c-header: oklch(0.90 0.02 264);

  --gradient:       linear-gradient(0deg, var(--bg) 0%, var(--bg-light) 95%);
  --gradient-hover: linear-gradient(0deg, var(--bg) 0%, var(--bg-light) 100%);

  color-scheme: light;
}

/* =========================
   Reset/typografi
   ========================= */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;

  /* Liten bakgrundsglow i dark för djup (neutralt i light) */
  background:
    radial-gradient(1200px 800px at 70% -10%,
      color-mix(in oklch, black 65%, transparent),
      transparent 60%
    ),
    var(--bg-dark);

  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  transition: background-color 180ms ease, color 180ms ease, background-image 180ms ease;
}
@media (prefers-reduced-motion: reduce) { body { transition: none; } }

/* Fokusring – använd accent/primary */
:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* Länkar */
a { color: var(--accent); }
a:hover { text-decoration: underline; }

/* =========================
   Layout: app
   ========================= */
.app__header {
  position: fixed;
  inset: env(safe-area-inset-top) 0 auto 0;
  height: var(--header-h);
  background: var(--c-header);
  color: var(--text);
  border-bottom: 1px solid var(--card-border);
  display: flex;
  align-items: center;
  z-index: var(--z-header);
  backdrop-filter: saturate(1.05) blur(6px);
}
.app__header .container {
  width: 100%;
  max-width: var(--container-w);
  margin: 0 auto;
  padding-inline: var(--container-px);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.app__main {
  min-height: calc(100vh - var(--header-h));
  padding-top: var(--header-h);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}


/* =========================
   Dashboard Container (RGL sköter position)
   ========================= */
.dashboard {
  width: 100%;
  max-width: var(--container-w);
  margin: 0 auto;
  padding: 12px var(--container-px);

  gap: var(--gap);
  min-height: calc(100vh - var(--header-h) - 24px);
}

/* =========================
   Kort-stil
   ========================= */
.card {
  display: flex;
  flex-direction: column;     /* innehåll börjar uppifrån */
  align-items: stretch;
  justify-content: flex-start;
  gap: 8px;

  font-weight: 600;
  border-radius: 12px;
  padding: 12px;

  background: var(--card-bg);
  border: 1px solid var(--card-border);
  box-shadow: var(--card-shadow);

  transition:
    transform 120ms ease,
    box-shadow 120ms ease,
    background-color 120ms ease,
    border-color 120ms ease;
}
.card:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 28px color-mix(in oklch, black 72%, transparent);
  border-color: color-mix(in oklch, var(--border) 70%, transparent);
}
.card:active {
  transform: translateY(0);
  box-shadow: 0 6px 16px color-mix(in oklch, black 65%, transparent);
}

.card__body { flex: 1; min-height: 0; overflow: auto; }

/* =========================
   Leaderboard-stil
   ========================= */
.leaderboard-container {
  width: 100%;
  padding: 0 16px;
  text-align: left;
}
.leaderboard-container h2 {
  font-size: 1.2rem;
  margin-bottom: 12px;
}
.leaderboard-list { list-style: none; padding: 0; margin: 0; }

.leaderboard-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 4px;
  border-bottom: 1px solid var(--card-border);
  transition: background-color 120ms ease;
}
.leaderboard-item:last-child { border-bottom: none; }

.leaderboard-item.is-current-user {
  background-color: color-mix(in oklch, var(--warn) 20%, transparent);
  font-weight: 700;
}
.leaderboard-item.is-separator {
  justify-content: center;
  cursor: pointer;
  color: var(--text-muted);
  font-weight: 700;
  letter-spacing: 2px;
  border-bottom: 1px solid var(--card-border);
}
.leaderboard-item.is-separator:hover {
  background-color: color-mix(in oklch, var(--bg) 85%, white);
}
.leaderboard-item:not(.is-separator) { cursor: pointer; }
.leaderboard-item:not(.is-separator):hover {
  background-color: color-mix(in oklch, var(--bg) 90%, white);
}

.leaderboard-name {
  flex-grow: 1; margin-left: 12px;
  transition: transform 150ms cubic-bezier(0.22, 1, 0.36, 1);
}
.leaderboard-item:hover .leaderboard-name { transform: translateY(-2px); }

/* Avatar (img eller inline-SVG med fill="currentColor") */
.leaderboard-avatar {
  width: 24px; height: 24px;
  border-radius: 50%;
  margin-left: 8px;
  object-fit: cover;
}
/* Separat färgkontroll för inline-SVG-avatar: */
.muted { color: var(--text-muted); }

/* =========================
   Responsivitet
   ========================= */
@media (max-width: 1024px) {
  :root { --header-h: 64px; }
}
@media (max-width: 900px) {
  .dashboard { min-height: auto; }
}

/* =========================
   Overlay-lager
   ========================= */
.overlay {
  position: fixed;
  inset: 0;
  background: linear-gradient(
    to bottom,
    color-mix(in oklch, black 70%, transparent),
    color-mix(in oklch, black 55%, transparent)
  );
  display: grid;
  place-items: center;
  z-index: var(--z-overlay);
  backdrop-filter: blur(2px);
}
.overlay__card {
  background: var(--surface-2);
  border: 1px solid var(--card-border);
  box-shadow: 0 12px 36px color-mix(in oklch, black 75%, transparent);
  border-radius: 16px;
  padding: 16px;
  max-width: min(960px, 90vw);
}

/* =========================
   Knapp som nyttjar accent
   ========================= */
.btn-primary {
  background: var(--accent);
  color: var(--accent-contrast);
  border: 1px solid color-mix(in oklch, var(--accent) 60%, black);
  border-radius: 10px;
  padding: 8px 12px;
  font-weight: 600;
  transition: filter 120ms ease, transform 120ms ease;
}
.btn-primary:hover { filter: brightness(1.05); transform: translateY(-1px); }
.btn-primary:active { transform: translateY(0); }

/* =========================
   Divider, scrollbar, selection
   ========================= */
.hr,
.divider {
  height: 1px;
  background: linear-gradient(
    to right,
    transparent,
    var(--card-border),
    transparent
  );
  border: 0;
}

/* Scrollbar (webkit) – diskret, tematisk */
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-track { background: transparent; }
*::-webkit-scrollbar-thumb {
  background: color-mix(in oklch, var(--border-muted) 65%, transparent);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
*::-webkit-scrollbar-thumb:hover {
  background: color-mix(in oklch, var(--border) 70%, transparent);
}

/* Text selection – mild accent */
::selection {
  background: color-mix(in oklch, var(--primary) 35%, transparent);
  color: #fff;
}

/* High-contrast preferens */
@media (prefers-contrast: more) {
  :root {
    --card-border: color-mix(in oklch, var(--border) 75%, transparent);
    --text-muted: color-mix(in oklch, var(--text) 60%, var(--text-muted));
  }
  .card { border-width: 1.5px; }
}

/* =========================
   Widgets inom dashboard
   ========================= */
.widget { display: flex; flex-direction: column; overflow: hidden; }
.widget__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: move; /* draggable handle */
  user-select: none;
  border-bottom: 1px solid var(--card-border);
  margin-bottom: 8px;
}
.widget__title { font-size: 1rem; font-weight: 600; margin: 0; }

.widget__remove {
  background: transparent;
  border: 1px solid var(--card-border);
  border-radius: 8px;
  font-weight: 600;
  padding: 2px 8px;
  cursor: pointer;
}
.widget__remove:hover {
  background: color-mix(in oklch, var(--danger) 20%, transparent);
  border-color: color-mix(in oklch, var(--danger) 60%, transparent);
}

.widget__body { flex: 1; overflow-y: auto; min-height: 0; }

/* =========================
   Avatar styling (för inline-SVG med currentColor)
   ========================= */
.leaderboard-avatar {
  width: 48px;
  height: 48px;
  color: var(--text-muted); /* styr SVG-färg via currentColor */
}
